<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>中国铁路物联网智慧平台</title>

  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="../../bootstrap/css/bootstrap.css">
  <!-- Font Awesome 字体图标库 使用方式请参考官网-->
  <link rel="stylesheet" href="../../components/font-awesome/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="../../components/Ionicons/css/ionicons.min.css">
  <!-- Theme style 项目主体公共样式-->
  <link rel="stylesheet" href="../../dist/base-css/main.css">
  <!-- plugins -->
  <link rel="stylesheet" href="../../plugins/css3kg/css/style.css">
  <link rel="stylesheet" href="../../plugins/Tdrag/jquery.dad.css">
  <!-- components style -->
  <link rel="stylesheet" href="../../components/bridge-chart/styles/bridge-chart.css">
  <link rel="stylesheet" href="../../components/main/main.css">

  <link rel="stylesheet" href="../big-screen/styles/big-screen.css">
  <link rel="stylesheet" href="./styles/home.css">

  <!-- bootstrap wysihtml5 - text editor -->
  <link rel="stylesheet" href="../../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">


  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <style>
    .content-iframe {
      top:-100%;
    }
    .content-iframe.active{
      top:0;
    }
  </style>

</head>
<!-- 如果左侧不想用弹出二级的形式，而是上下折叠显示，请去掉 “sidebar-mini” “sidebar-collapse”两个class类名 -->

<body class="hold-transition skin-blue sidebar-mini sidebar-collapse">
  <div class="wrapper">

    <header class="main-header">

      <nav class="navbar navbar-static-top">
        <!-- header左侧 -->
        <div class="navbar-papes-menu navbar-left">
          <ul class="nav navbar-nav">
            <li>
              <a href="##" class="dropdown-toggle" data-hover="dropdown">
                <span>
                  <i class="user-icon dtjc-icon"></i>动态监测</span>

              </a>
              <div class="dropdown-menu" data-stopPropagation='true'>

                <ul class="dropdown-lists">
                  <li data-url="../page3/index.html">桥梁监测</li>
                  <li>坠陀监测</li>
                  <li>钢轨监测</li>
                  <li>设备箱</li>
                </ul>
              </div>

            </li>
            <li>
              <a href="##" class="dropdown-toggle" data-hover="dropdown">
                <span>
                  <i class="user-icon gzzd-icon"></i>故障诊断</span>

              </a>
              <div class="dropdown-menu">

                <ul class="dropdown-lists">
                  <li>桥梁监测</li>
                  <li>坠陀监测</li>
                  <li>钢轨监测</li>
                  <li>设备箱</li>
                </ul>
              </div>

            </li>
            <li>
              <a href="##" class="dropdown-toggle" data-hover="dropdown">
                <span>
                  <i class="user-icon jkpg-icon"></i>健康评估</span>

              </a>
              <div class="dropdown-menu">

                <ul class="dropdown-lists">
                  <li>桥梁监测</li>
                  <li>坠陀监测</li>
                  <li>钢轨监测</li>
                  <li>设备箱</li>
                </ul>
              </div>

            </li>
          </ul>
        </div>
        <!-- /.header左侧 -->

        <div class="header-logo">

        </div>
        <!-- 配置选项卡 -->
        <div class="navbar-custom-menu">
          <ul class="nav navbar-nav">
            <!-- 用户信息弹出 -->
            <li class="dropdown user user-menu">

              <a href="#" class="dropdown-toggle" data-hover="dropdown">

                <span class="hidden-xs">
                  <i class="user-icon tab-icon"></i>

                  <i class="fa fa-arrow-down" style="position: relative;top:6px;"></i>
                </span>
              </a>
              <ul class="dropdown-menu" data-stopPropagation='true'>
                <!-- User image -->
                <li class="user-header">
                  <img src="../../imgs/header/3.jpg" class="img-circle" alt="User Image">
                  <div class="user-info">
                    <h3>用户名，你好</h3>
                    <ul class="">
                      <li class="modify-pwd">修改密码</li>
                      <li class="sign-out">退出</li>
                    </ul>
                  </div>
                </li>
                <!-- Menu Body -->
                <li class="user-body">
                  <div class="user-body__title">
                    配置选项卡
                  </div>
                  <!-- <div class="user-body__lists" id="user-tabs1">
                    <label>
                      <input type="checkbox" style="display:none"  checked data-mark="gjfb">
                      <i class="check-box-icon"></i>
                      <span>告警级别分布</span>
                    </label>
                    <label>
                      <input type="checkbox" style="display:none"  checked data-mark="sssl">
                      <i class="check-box-icon"></i>
                      <span>各种设施和数量</span>
                    </label>
                    <label>
                      <input type="checkbox" style="display:none"  checked data-mark="shpg">
                      <i class="check-box-icon"></i>
                      <span>危险伤害评估</span>
                    </label>
                    <label>
                      <input type="checkbox" style="display:none"  checked data-mark="gjsj">
                      <i class="check-box-icon"></i>
                      <span>告警数据</span>
                    </label>
                    <label>
                      <input type="checkbox" style="display:none"  checked data-mark="gzsc">
                      <i class="check-box-icon"></i>
                      <span>月平均故障时长</span>
                    </label>
                    <label>
                      <input type="checkbox" style="display:none"  checked data-mark="sjyc">
                      <i class="check-box-icon"></i>
                      <span>剩余时间预测</span>
                    </label>
                    <label>
                      <input type="checkbox" style="display:none"  checked data-mark="wxbl">
                      <i class="check-box-icon"></i>
                      <span>状态维修比例</span>
                    </label>
                    <label>
                      <input type="checkbox" style="display:none"  checked data-mark="gdqs">
                      <i class="check-box-icon"></i>
                      <span>工单趋势</span>
                    </label>
                  </div> -->

                  <div class="toggle toggle--daynight">
                    <input type="checkbox" id="toggle--daynight" class="toggle--checkbox">
                    <label class="toggle--btn" for="toggle--daynight">
                      <span class="toggle--feature"></span>
                    </label>
                  </div>
                </li>

              </ul>
            </li>
            <!-- /.用户信息弹出 -->
          </ul>
        </div>
        <!-- /.配置选项卡 -->


        <!-- header右侧 -->
        <div class="navbar-papes-menu navbar-right">
          <ul class="nav navbar-nav">
            <li>
              <a href="##" class="dropdown-toggle" data-hover="dropdown">
                <span>
                  <i class="user-icon gzyc-icon"></i>故障预测</span>

              </a>
              <div class="dropdown-menu">
                <ul class="dropdown-lists">
                  <li>桥梁监测</li>
                  <li>坠陀监测</li>
                  <li>钢轨监测</li>
                  <li>设备箱</li>
                </ul>
              </div>

            </li>
            <li>
              <a href="##" class="dropdown-toggle" data-hover="dropdown">
                <span>
                  <i class="user-icon wxjc-icon"></i>维修决策
                </span>

              </a>
              <div class="dropdown-menu">

                <ul class="dropdown-lists">
                  <li>桥梁监测</li>
                  <li>坠陀监测</li>
                  <li>钢轨监测</li>
                  <li>设备箱</li>
                </ul>
              </div>

            </li>
            <li>
              <a href="##" class="dropdown-toggle" data-hover="dropdown">
                <span>
                  <i class="user-icon pzgl-icon"></i>配置管理</span>
              </a>
              <div class="dropdown-menu">

                <ul class="dropdown-lists">
                  <li>桥梁监测</li>
                  <li>坠陀监测</li>
                  <li>钢轨监测</li>
                  <li>设备箱</li>
                </ul>
              </div>

            </li>
          </ul>
        </div>
        <!-- /.header右侧 -->



      </nav>
    </header>

    <!-- 内容包装器,包含页面内容 -->
    <div class="content-wrapper night-theme" style="background-color:transparent">
      <div class="big-screen-content" id="drag-container">
        <div class="big-screen-left" id="big-screen-left">
          <!-- 告警级别分布 -->
          <div class="module" id="gjfb" DR_drag="1" DR_replace="1" data-index="0">
            <span class="module-close"></span>
            <div class="module-header">
              <h3 class="module-title">告警级别分布</h3>

            </div>
            <div class="module-body">
              <div class="chart" id="pieChart1" style="width:140px;height:130px;"></div>
              <div class="pieChart1-right">
                <ul>
                  <li class="red">
                    <div class="num">
                      40
                      <span>%</span>
                    </div>
                    <div class="bar">
                      <div class="bar-inner" style="width:40%"></div>
                    </div>
                    <div class="desc">严重</div>
                  </li>
                  <li class="green">
                    <div class="num">
                      25
                      <span>%</span>
                    </div>
                    <div class="bar">
                      <div class="bar-inner" style="width:25%"></div>
                    </div>
                    <div class="desc">重要</div>
                  </li>
                  <li class="orange">
                    <div class="num">
                      35
                      <span>%</span>
                    </div>
                    <div class="bar">
                      <div class="bar-inner" style="width:35%"></div>
                    </div>
                    <div class="desc">指示</div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <!-- 各种设施和数量 -->
          <div class="module" id="sssl" DR_drag="1" DR_replace="1" data-index="1">
            <span class="module-close"></span>
            <div class="module-header">
              <h3 class="module-title">各种设施和数量</h3>

            </div>
            <div class="module-body">
              <div class="chart" id="bar3D" style="width:100%;height:150px;"></div>
            </div>
          </div>
          <!-- 危险伤害评估 -->
          <div class="module" id="shpg" DR_drag="1" DR_replace="1" data-index="2">
            <span class="module-close"></span>
            <div class="module-header">
              <h3 class="module-title">危险伤害评估</h3>

            </div>
            <div class="module-body">
              <div class="progress_bar1 progress-bar-primary">

                <div class="pro-bar">
                  <div class="progress-icon wd-icon"></div>
                  <small class="progress_bar_title">
                    温度
                  </small>
                  <span class="progress-bar-inner" style="width: 40%;" data-value="500" data-percentage-value="500">
                    <i class="bubble">40</i>
                  </span>
                </div>
              </div>

              <div class="progress_bar1 progress-bar-green">
                <div class="pro-bar">
                  <div class="progress-icon cd-icon"></div>
                  <small class="progress_bar_title">
                    长度
                  </small>
                  <span class="progress-bar-inner" style="width: 70%;" data-value="70" data-percentage-value="70">
                    <i class="bubble">70</i>
                  </span>
                </div>
              </div>

              <div class="progress_bar1 progress-bar-red">
                <div class="pro-bar">
                  <div class="progress-icon kd-icon"></div>
                  <small class="progress_bar_title">
                    跨度
                  </small>
                  <span class="progress-bar-inner" style="width: 35%;" data-value="65" data-percentage-value="65">
                    <i class="bubble">50</i>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <!-- 告警数据 -->
          <div class="module" id="gjsj" DR_drag="1" DR_replace="1" data-index="3">
            <span class="module-close"></span>
            <div class="module-header">
              <h3 class="module-title">告警数据</h3>

            </div>
            <div class="module-body">
              <div class="table-container">
                <ul class="table__header clearfix">
                  <li class="li1">名称及编号</li>
                  <li class="li2">偏移量</li>
                  <li class="li3">预警时间</li>
                  <li class="li4">等级</li>
                </ul>
                <div class="table__body roll-wrap roll_col clearfix" id="roll">
                  <ul class="table-list roll__list">
                    <li>
                      <ol class="red">
                        <li class="li1">坠砣 zt-5-1</li>
                        <li class="li2">15cm</li>
                        <li class="li3">05-31 10:00</li>
                        <li class="li4">严重</li>
                      </ol>
                    </li>
                    <li>
                      <ol class="blue">
                        <li class="li1">坠砣 zt-5-1</li>
                        <li class="li2">15cm</li>
                        <li class="li3">05-31 10:00</li>
                        <li class="li4">严重</li>
                      </ol>
                    </li>

                    <li>
                      <ol class="orange">
                        <li class="li1">坠砣 zt-5-1</li>
                        <li class="li2">15cm</li>
                        <li class="li3">05-31 10:00</li>
                        <li class="li4">严重</li>
                      </ol>
                    </li>
                    <li>
                      <ol class="red">
                        <li class="li1">坠砣 zt-5-1</li>
                        <li class="li2">15cm</li>
                        <li class="li3">05-31 10:00</li>
                        <li class="li4">严重</li>
                      </ol>
                    </li>
                    <li>
                      <ol class="blue">
                        <li class="li1">坠砣 zt-5-1</li>
                        <li class="li2">15cm</li>
                        <li class="li3">05-31 10:00</li>
                        <li class="li4">严重</li>
                      </ol>
                    </li>
                    <li>
                      <ol class="red">
                        <li class="li1">坠砣 zt-5-1</li>
                        <li class="li2">15cm</li>
                        <li class="li3">05-31 10:00</li>
                        <li class="li4">严重</li>
                      </ol>
                    </li>
                    <li>
                      <ol class="blue">
                        <li class="li1">坠砣 zt-5-1</li>
                        <li class="li2">15cm</li>
                        <li class="li3">05-31 10:00</li>
                        <li class="li4">严重</li>
                      </ol>
                    </li>

                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="big-screen-center" id="jczl">
          <div class="wblock-container">
            <span class="close" id="jczl-close"></span>
            <div class="row">
              <div class="col-sm-3">
                <div class="wblock blue-wblock">
                  <h3 class="wblock-title">300</h3>
                  <span>监测总数</span>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="wblock green-wblock">
                  <h3 class="wblock-title">400</h3>
                  <span>监测总数</span>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="wblock red-wblock">
                  <h3 class="wblock-title">200</h3>
                  <span>监测总数</span>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="wblock orange-wblock">
                  <h3 class="wblock-title">100</h3>
                  <span>监测总数</span>
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="big-screen-right" id="big-screen-right">
          <!-- 月平均故障时长 -->
          <div class="module module--right" id="gzsc" DR_drag="1" DR_replace="1" data-index="4">
            <span class="module-close"></span>
            <div class="module-header">
              <h3 class="module-title">月平均故障时长</h3>

            </div>
            <div class="module-body">
              <div class="roll-wrap chart-mouths" id="chart-mouths">
                <ul class="roll__list">
                  <li>
                    <div class="chart" id="pieChartMonth12" style="width:100%;height:110px;"></div>
                    <div class="months-container">
                      <span class="left-month">一月</span>
                      <span class="right-month">二月</span>
                    </div>
                  </li>
                  <li>
                    <div class="chart" id="pieChartMonth34" style="width:100%;height:110px;">

                    </div>
                    <div class="months-container">
                      <span class="left-month">三月</span>
                      <span class="right-month">四月</span>
                    </div>
                  </li>
                  <li>
                    <div class="chart" id="pieChartMonth56" style="width:100%;height:110px;">

                    </div>
                    <div class="months-container">
                      <span class="left-month">五月</span>
                      <span class="right-month">六月</span>
                    </div>
                  </li>
                  <li>
                    <div class="chart" id="pieChartMonth12" style="width:100%;height:110px;">

                    </div>
                    <div class="months-container">
                      <span class="left-month">一月</span>
                      <span class="right-month">二月</span>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <!-- 剩余时间预测 -->
          <div class="module module--right" id="sjyc" DR_drag="1" DR_replace="1" data-index="5">
            <span class="module-close"></span>
            <div class="module-header">
              <h3 class="module-title">剩余时间预测</h3>

            </div>
            <div class="module-body">
              <div class="chart" id="bar1" style="width:100%;height:150px;"></div>
            </div>
          </div>
          <!-- 状态维修比例 -->
          <div class="module module--right" id="wxbl" DR_drag="1" DR_replace="1" data-index="6">
            <span class="module-close"></span>
            <div class="module-header">
              <h3 class="module-title">状态维修比例</h3>

            </div>
            <div class="module-body">
              <div class="state-maintenance">
                <div class="progress_bar">

                  <div class="pro-bar">
                    <smal class="progress_bar_title">
                      设备总数
                      <span class="progress_number">40%</span>
                    </smal>
                    <span class="progress-bar-inner" style="width: 40%;" data-value="500" data-percentage-value="500"></span>
                    <div class="bar-desc">
                      平均故障时间
                    </div>
                  </div>
                </div>
              </div>


            </div>
          </div>
          <!-- 工单趋势 -->
          <div class="module module--right" id="gdqs" DR_drag="1" DR_replace="1" data-index="7">
            <span class="module-close"></span>
            <div class="module-header">
              <h3 class="module-title">工单趋势</h3>

            </div>
            <div class="module-body">
              <div class="chart" id="linecharts2" style="width:100%;height:150px;"></div>
            </div>
          </div>
        </div>

        <div class="toggle-btn">

        </div>

        <!-- 选项卡 -->
        <div class="tab-wrapper">
          <div class="tab-header">
            <h3 class="tab-header__title">配置选项卡</h3>
            <span class="tab-header__close"></span>
          </div>
          <div class="tab-body">
            <div class="label-items" id="user-tabs">
              <label>
                <input type="checkbox" style="display:none" checked data-mark="jczl">
                <i class="check-box-icon icon1"></i>
                <span>监测总览</span>
              </label>
              <label>
                <input type="checkbox" style="display:none" checked data-mark="gjfb">
                <i class="check-box-icon icon1"></i>
                <span>告警级别分布</span>
              </label>
              <label>
                <input type="checkbox" style="display:none" checked data-mark="sssl">
                <i class="check-box-icon icon2"></i>
                <span>各种设施和数量</span>
              </label>
              <label>
                <input type="checkbox" style="display:none" checked data-mark="shpg">
                <i class="check-box-icon icon3"></i>
                <span>危险伤害评估</span>
              </label>
              <label>
                <input type="checkbox" style="display:none" checked data-mark="gjsj">
                <i class="check-box-icon icon4"></i>
                <span>告警数据</span>
              </label>
              <label>
                <input type="checkbox" style="display:none" checked data-mark="gzsc">
                <i class="check-box-icon icon5"></i>
                <span>月平均故障时长</span>
              </label>
              <label>
                <input type="checkbox" style="display:none" checked data-mark="sjyc">
                <i class="check-box-icon icon6"></i>
                <span>剩余时间预测</span>
              </label>
              <label>
                <input type="checkbox" style="display:none" checked data-mark="wxbl">
                <i class="check-box-icon icon7"></i>
                <span>状态维修比例</span>
              </label>
              <label>
                <input type="checkbox" style="display:none" checked data-mark="gdqs">
                <i class="check-box-icon icon8"></i>
                <span>工单趋势</span>
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="modules-register" style="display:none"></div>
      <!-- 地图iframe -->
      <div class="map-iframe">
        <iframe src="map.html" frameborder="0" style="width:100%;height:100%;display:block;"></iframe>
      </div>
      <!-- 内容iframe -->
      <div class="content-iframe">
        <iframe src="content.html" frameborder="0" style="width:100%;height:100%;display:block;" name="contentIframe"
          id="contentIframe"></iframe>
      </div>
    </div>
  </div>
  <!-- ./wrapper -->

  <!-- jQuery 3 -->
  <script src="../../plugins/jquery/jquery.min.js"></script>
  <!-- jQuery UI 1.11.4 -->
  <script src="../../plugins/jquery-ui/jquery-ui.min.js"></script>
  <!-- 使用Bootstrap工具提示解决jQuery UI工具提示中的冲突 -->
  <script>
    $.widget.bridge('uibutton', $.ui.button);


    $(function () {
      // 计算content-wrapper的高度
      function resizeContentWrapper() {
        var headerHeight = $('.main-header').height();
        var winHeight = $('body').height();
        var contentWrapperHeight = winHeight - headerHeight
        $('.content-wrapper').height(contentWrapperHeight);

      }



      $("body").on('click', '[data-stopPropagation]', function (e) {
        e.stopPropagation();
      });



      $("#toggle--daynight").change(function () {
        if ($(this).prop('checked')) {
          $('.content-wrapper').removeClass('night-theme').addClass(
            'day-theme')
        } else {
          $('.content-wrapper').removeClass('day-theme').addClass('night-theme')
        }
      });

      // 屏幕缩放
      function set(size) {

        $('body')[0].style.zoom = size;

        // $('.main-header')[0].style.zoom = size;
        document.body.style.cssText += '; -moz-transform: scale(' + size + ');-moz-transform-origin: 0 0; '; //
      }


      if ($(window).width() > 1300 && $(window).width() < 1400) {
        set(0.65);
        // $('.module').width(400);
        // $('.chart').height(180);

      }
      resizeContentWrapper();

    })
  </script>
  <!-- Bootstrap 3.3.7 -->
  <script src="../../bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="../../bootstrap/dist/js/bootstrap-hover-dropdown.js"></script>

  <!-- Bootstrap WYSIHTML5 -->
  <script src="../../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
  <!-- Slimscroll -->
  <script src="../../plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
  <!-- FastClick 解决移动端300ms延迟问题 -->
  <script src="../../plugins/fastclick/lib/fastclick.js"></script>
  <!-- echarts-v3  百度echarts3-->
  <script src="../../plugins/echarts-v3/echarts.js"></script>
  <!-- 线性回归工具库 -->
  <script src="../../plugins/echarts-v3/ecStat.min.js"></script>
  <!-- echarts dataTool -->
  <script src="../../plugins/echarts-v3/extension/dataTool.min.js"></script>
  <script src="../../plugins/echarts-v3/echarts-gl.js"></script>
  <!-- 引入自定义echart -->
  <script src="../big-screen/js/bar3D.js"></script>
  <script src="../big-screen/js/pieChart.js"></script>
  <script src="../big-screen/js/pie-bar.js"></script>
  <script src="../big-screen/js/linecharts.js"></script>
  <!-- components 自主开发组件-->
  <!-- plugins -->
  <script src="../../plugins/rollslider/rollSlide.js"></script>
  <!-- <script src="../../plugins/Swiper-3.1.220150914/dist/js/swiper.js"></script> -->

  <!-- 拖拽 -->
  <!-- <script src="../../plugins/Tdrag/jquery.dad.min.js"></script> -->
  <!-- <script src="../../plugins/Tdrag/Sortable.js"></script> -->
  <script src="../../plugins/dragMove/js/dragMove.js"></script>
  <!-- 用户js -->
  <script src="../big-screen/js/index.js"></script>

  <script>
    function addTab(dom, title, linkSrc, isClearOldTab) {
      document.getElementById('contentIframe').contentWindow['addTab']($(dom), title, linkSrc, isClearOldTab)
    }
    $(function () {
      $('.dropdown-lists li').click(function () {
        $(this).addClass('active').siblings().removeClass('active');
        $('.dropdown-toggle').removeClass('active');
        $(this).parents('.dropdown-menu').prev().addClass('active');
        var $dom = $(this)
        var title = $(this).text();
        var linkSrc = $(this).data('url');
        $('.content-iframe').addClass('active');
        document.getElementById('contentIframe').contentWindow['addTab']($dom, title, linkSrc, false)
      })
      // 配置选项卡
      $('.user-body__title').on('click', function () {
        $('.tab-wrapper').toggle();
      })
      // 关闭选项卡
      $('.tab-header__close').on('click', function () {
        $(this).parents('.tab-wrapper').hide()
      })
      // 悬浮框显示切换
      $('.toggle-btn').on('click', function () {
        $(this).toggleClass('active');
        $('.big-screen-left,.big-screen-right,.big-screen-center').toggleClass('active')
      })

      //选项卡
      function checkStatus(status) {
        $('#user-tabs label input').each(function () {
          var mark = $(this).data('mark');
          var $mark = $('#' + mark)
          var wrapContainer = $mark.parent();
          if ($(this).prop('checked')) {
            $mark.css('opacity', 1)
            // if (status == 1) {
            //   wrapContainer.append($mark);
            // } else {
            //   wrapContainer.prepend($mark);
            // }
          } else {
            $mark.css('opacity', 0)
            // $mark.hide()
          }
        })
      }
      checkStatus(1);
      //选型卡切换隐藏
      $('#user-tabs').on('change', 'label input', function () {
        checkStatus(2);
        dragAfter()
      })
      //关闭选项卡
      $('.module-close,#jczl-close').on('click', function (e) {
        e.stopPropagation();
        var mark = $(this).parents('.module,.big-screen-center').attr('id');
        $('#user-tabs label').find('[data-mark="' + mark + '"]').click();
      })


      //以下为拖拽排序，记住位置，主要逻辑为排序算法+localstorage
      $('body').dragMove({
        limit: true, // 限制在窗口内 
        childClass: '.module-header',
        callback: function ($move, $replace) {
          dragAfter()
        }
      });


      // 拖拽后存缓存
      function dragAfter() {
        var modules = $('#drag-container div.module');
        var modulesLength = modules.length;
        var sortArr = [];
        var timer = setTimeout(function () {
          clearTimeout(timer)
          for (var i = 0; i < modulesLength; i++) {
            var currentModule = $('#drag-container div.module').eq(i);
            var sortNum = currentModule.data('index');
            var parentContainerId = currentModule.parent().attr('id')
            var currentObj = {};
            currentObj.sortNum = sortNum;
            currentObj.parentContainerId = parentContainerId;
            if (currentModule.css('opacity') == '0') {
              currentObj.isShow = false;
            } else {
              currentObj.isShow = true;
            }
            sortArr.push(currentObj)
          }
          localStorage.setItem('sortTable', JSON.stringify(sortArr));//存入本地

          // $.ajax({
          //   url:'',
          //   data:sortArr,//把sortArr存入后台中
          // })

        }, 300)
      }
      // 读取缓存(从本地取出)
      var sortTable = JSON.parse(localStorage.getItem('sortTable'));
      //从后台去读
      //  $.ajax({
      //    url:'',
      //    success:function (sortTable) {
      //     readData(sortTable)
      //    }
      //  })
      readData(sortTable)
      function readData(sortTable) {
        if (sortTable) {
          var sortTableLen = sortTable.length;
          for (var i = 0; i < sortTableLen; i++) {
            var currSortNum = sortTable[i].sortNum;
            var currIsShow = sortTable[i].isShow;
            var currParentContainerId = sortTable[i].parentContainerId;
            $('#drag-container div.module').eq(currSortNum).attr('sort', i)
            $('#drag-container div.module').eq(currSortNum).attr('isShow', currIsShow)
            $('#drag-container div.module').eq(currSortNum).attr('currParentContainerId', currParentContainerId)
          }
          // 先排序
          var modules = $('#drag-container div.module')
          modules.sort(function (a, b) {
            var sortA = $(a).attr('sort');
            var sortB = $(b).attr('sort');
            if (parseInt(sortA) < parseInt(sortB)) {
              return -1;
            } else {
              return 1;
            }
          })
          // 排序之后追加到页面
          modules.detach().each(function (index, item) {
            var currParentContainerId = $(this).attr('currParentContainerId')
            var currIsShow = $(this).attr('isShow');
            var mark = $(this).attr('id');
            if (currIsShow == 'true') {
              $('#user-tabs label').find('input[mark="' + mark + '"]').prop('checked', true)
            } else if (currIsShow == 'false') {
              console.log($('#user-tabs label').find('input[mark="' + mark + '"]'));
              $('#user-tabs label').find('[data-mark="' + mark + '"]').prop('checked', false)
            }
            var parentContainer = $('#' + currParentContainerId);
            $(this).appendTo(parentContainer);
          })
          //模块默认显示或者隐藏
          checkStatus(1);
        }
      }


    })
  </script>
</body>

</html>